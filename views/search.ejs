<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - Motor de Busca</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <a href="/dashboard" class="logo">
        üîç Motor de Busca
      </a>
      <ul class="nav-links">
        <li><a href="/dashboard">Dashboard</a></li>
        <li><a href="/search" class="active">Buscar</a></li>
        <li><a href="/websites">Websites</a></li>
        <li><a href="/websites/add">Adicionar</a></li>
        <li><a href="/statistics">Estat√≠sticas</a></li>
        <li class="user-menu">
          <span>üë§ <%= user.name %></span>
          <a href="/logout" class="btn-logout">Sair</a>
        </li>
      </ul>
    </div>
  </nav>

  <main class="main-content">
    <div class="container">
      <div class="page-header">
        <h1>üîç Buscar Websites</h1>
        <p>Encontre websites por palavras-chave, t√≠tulo ou descri√ß√£o</p>
      </div>

      <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert alert-error">
          <%= error %>
        </div>
      <% } %>

      <div class="search-container">
        <form method="GET" action="/search" class="search-form">
          <input 
            type="text" 
            name="q" 
            value="<%= query %>"
            placeholder="Digite sua busca (ex: javascript, programa√ß√£o, desenvolvimento)"
            required
            autofocus
            class="search-input"
          >
          <button type="submit" class="btn btn-primary search-button">
            üîç Buscar
          </button>
        </form>
      </div>

      <% if (searched) { %>
        <div class="results-section">
          <h2>
            <% if (results.length > 0) { %>
              <%= results.length %> resultado<%= results.length !== 1 ? 's' : '' %> para "<%= query %>"
            <% } else { %>
              Nenhum resultado para "<%= query %>"
            <% } %>
          </h2>

          <% if (results.length > 0) { %>
            <div class="results-list">
              <% results.forEach(website => { %>
                <div class="result-item">
                  <h3>
                    <a href="<%= website.url %>" target="_blank" rel="noopener noreferrer">
                      <%= website.title %>
                    </a>
                  </h3>
                  <p class="result-url"><%= website.url %></p>
                  <p class="result-description"><%= website.description %></p>
                  <div class="result-keywords">
                    <% website.keywords.forEach(keyword => { %>
                      <a href="/search?q=<%= keyword %>" class="keyword-tag">
                        <%= keyword %>
                      </a>
                    <% }); %>
                  </div>
                </div>
              <% }); %>
            </div>
          <% } else { %>
            <div class="empty-results">
              <p>üòï N√£o encontramos websites com esses termos.</p>
              <p>Tente:</p>
              <ul>
                <li>Usar palavras-chave mais gen√©ricas</li>
                <li>Verificar a ortografia</li>
                <li>Adicionar o website que voc√™ procura usando <a href="/websites/add">este formul√°rio</a></li>
              </ul>
            </div>
          <% } %>
        </div>
      <% } else { %>
        <div class="search-suggestions">
          <h3>Sugest√µes de busca:</h3>
          <div class="suggestion-tags">
            <a href="/search?q=javascript" class="suggestion-tag">javascript</a>
            <a href="/search?q=programa√ß√£o" class="suggestion-tag">programa√ß√£o</a>
            <a href="/search?q=desenvolvimento" class="suggestion-tag">desenvolvimento</a>
            <a href="/search?q=web" class="suggestion-tag">web</a>
            <a href="/search?q=api" class="suggestion-tag">api</a>
            <a href="/search?q=database" class="suggestion-tag">database</a>
            <a href="/search?q=tutorial" class="suggestion-tag">tutorial</a>
          </div>
        </div>
      <% } %>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Motor de Busca - Projeto 2 EC48B</p>
      <p>Matheus Mondaini (2504219) - UTFPR</p>
    </div>
  </footer>

  <script src="/js/main.js"></script>
</body>
</html>
